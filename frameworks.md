# Frameworks

Adonis es un framework bastante mas dogmatico a comparacion de Hapi, lo que significa que ya tiene metodos standarizados y preconfigurados en la aplicacion para resolver los problemas mas comunes con las mejores practicas, como son la autenticacion, ruteo, validaciones, etc. Para comenzar, tiene una interfaz de linea de comandos (CLI) para rapidamente crear un nuevo proyecto con una estructura de folders siguiendo el patron MVC, mientras que Hapi te da mas libertad para que tu mismo decidas como estructurar el proyecto. Tambien viene con nodemon incorporado si ejecutamos el proyecto con el CLI (adonis serve --dev). Ademas posee un sistema de mapeo objeto-relacional y integracion con base de datos SQL llamado Lucid, el cual facilita bastante el uso de queries mientras que tambien da soporte a operaciones mas complicadas como transacciones. Hapi utiliza plugins para manejar sus middlewares, mientras que Adonis solo usa middlewares.

En lo que se refiere al manejo de las rutas, Adonis tiene soporte nativo para el async await y los 2 manejan el response de forma automatica, solo teniendo que retornar un string o json en la funcion de la ruta. Para acceder al body, adonis necesita instalar un body parser, mientras que Hapi puede acceder a la propiedad payload del objeto response. En el manejo de parametros, Adonis utiliza el estilo tradicional de Express con los 2 puntos seguidos del parametro, mientras que en Hapi lo tienes que encerrar en corchetes. Finalmente para acceder a los objetos request y response, en Adonis tienes que destructurarlos de un objeto HTTP Context que es pasado como parametro a todas las rutas, mientras que Hapi los obtiene como normalmente se hace en Express con 2 objetos separados.

El framework que escogi para investigar es Nest.js, el cual esta basado en Express y inspirado fuertemente en Angular. Esto se puede evidenciar gracias a su uso de controladores, proveedores, modulos, pipes y su adopcion de Typescript, aunque tambien puede usarse javascript pero no es recomendable. Al igual que en Angular, usa bastante los decoradores para inyectar dependencias y abstraer algunos procesos esenciales para la aplicacion. Esto permite que sea mucho mas escalable aunque restringe un poco la flexibilidad. Tambien cuenta con un CLI para rapidamente generar la estructura de un proyecto. 

Los modulos son como los bloques de construccion de una aplicacion con Nest js, hipoteticamente se puede crear toda una aplicacion dentro de 1 solo modulo pero no es recomendable. Los controladores son clases responsables de manejar cualquier request y responderle al cliente, y al igual que usando el framework Spring Boot de Java, se puede usar anotaciones para definirlos, en este caso la anotacion @Controller con el nombre de la ruta entre parentesis. Adentro de esta clase, se puede usar las anotaciones en cualquier metodo para definir los tipicos verbos de rutas como @GET, @POST, @PUT, etc. Para concluir, Nest viene configurado con Jest para tests unitarios y Supertest para tests end-to-end.